version: "3.8"

services:
  boot-otel-tempo-provider1-optentelemetry-skywalking:
    image: "mnadeem/boot-otel-tempo-provider1-optentelemetry-skywalking:0.0.1-SNAPSHOT"
    container_name: boot-otel-tempo-provider1-optentelemetry-skywalking
    networks:
      - xs-bridge
    ports:
      - "8092:8090"
    environment:
      PROVIDER1_DB_URL: jdbc:postgresql://provider1-db:5432/provider1
      PROVIDER1_DB_USER: postgres
      PROVIDER1_DB_PASS: postgrespassword
    volumes:
      - ./../data/logs:/app/logs
    external_links:
      - oap:oap
      - provider1-db:provider1-db
  boot-otel-tempo-api-skywalking:
    image: "mnadeem/boot-otel-tempo-api-optentelemetry-skywalking:0.0.1-SNAPSHOT"
    container_name: boot-otel-tempo-api-optentelemetry-skywalking
    networks:
      - xs-bridge
    ports:
      - "8072:8080"
    environment:
      PROVIDER1_URL_BASE: "http://boot-otel-tempo-provider1:8091"
    volumes:
      - ./../data/logs:/app/logs
    depends_on:
      - boot-otel-tempo-provider1-optentelemetry-skywalking
networks:
  xs-bridge:
    external: true